<html>
  <head>
    <title>classification API reference (Incanter)</title>
    <link href="../static/incanter.ico" rel="icon" />
    <link href="../static/incanter.ico" rel="shortcut icon" />
    <link media="all" type="text/css" href="../static/clojure.css" rel="stylesheet" />
    <link media="all" type="text/css" href="../static/wiki.css" rel="stylesheet" />
    <link media="all" type="text/css" href="../static/internal.css" rel="stylesheet" />
    <!-- TODO: are we using these (from clojure.org)? If so, add the files -->
    <script src="file/view/code_highlighter.js" type="text/javascript"></script>
    <script src="file/view/clojure.js" type="text/javascript"></script>
    <style>.menuWrapper{height: 36px;}</style>
    <!--[if lte IE 6]>
    <link rel="stylesheet" href="http://www.wikispaces.com/_/2009051601/s/internal_ie.css" type="text/css" />
    <![endif]-->
  </head>
<!--
This document was auto-generated from the source by the clojure autodoc system.
To report errors or ask questions about the overall documentation structure, formatting,
etc., contact Tom Faulhaber (google mail name: tomfaulhaber).
For errors in the documentation of a particular namespace, contact the author of that
namespace.
-->
  <body>
    <div id="AllContentContainer">
      <div id="Header">
	<a id="Logo" href="index.html"><img alt="Clojure" height="100" width="100" src="../static/clojure-icon.gif" /></a>
	<h1><a title="page header title" id="page-header" href="index.html">Incanter</a></h1>
      </div>
      <div id="leftcolumn"><div style="text-align: center;"></div>
<div class="menu">
  <div class="WikiCustomNav WikiElement wiki">
    <div class="BranchTOC">
      <a class="wiki_link" href="#">Branches</a>
      <ul id="left-sidebar-branch-list">
        <li><a href="../index.html" class="wiki_link">master</a></li><li><a href="../branch-1.0.x/index.html" class="wiki_link">1.0.x</a></li>
      </ul>
    </div>
    <a class="wiki_link" href="index.html">Overview</a><br />
    <a class="wiki_link" href="api-index.html">API Index</a><br />
    <a class="wiki_link" href="#">Namespaces:</a>
    <ul id="left-sidebar-list">
      <li><a href="bayes-api.html" class="wiki_link">bayes</a></li><li><a href="censored-api.html" class="wiki_link">censored</a></li><li><a href="charts-api.html" class="wiki_link">charts</a></li><li><a href="chrono-api.html" class="wiki_link">chrono</a></li><li><a href="classification-api.html" class="wiki_link">classification</a></li><li><a href="core-api.html" class="wiki_link">core</a></li><li><a href="datasets-api.html" class="wiki_link">datasets</a></li><li><a href="incremental-stats-api.html" class="wiki_link">incremental-stats</a></li><li><a href="information-theory-api.html" class="wiki_link">information-theory</a></li><li><a href="internal-api.html" class="wiki_link">internal</a></li><li><a href="io-api.html" class="wiki_link">io</a></li><li><a href="mongodb-api.html" class="wiki_link">mongodb</a></li><li><a href="optimize-api.html" class="wiki_link">optimize</a></li><li><a href="pdf-api.html" class="wiki_link">pdf</a></li><li><a href="probability-api.html" class="wiki_link">probability</a></li><li><a href="processing-api.html" class="wiki_link">processing</a></li><li><a href="som-api.html" class="wiki_link">som</a></li><li><a href="stats-api.html" class="wiki_link">stats</a></li><li><a href="transformations-api.html" class="wiki_link">transformations</a></li>
    </ul>
  </div>
</div>
</div>
      <div id="rightcolumn">
	<div id="Content">
	  <div class="contentBox"><div class="innerContentBox">
              <div id="content_view" class="wiki wikiPage">
                <div id="right-sidebar"><div id="toc">
  <h1 class="nopad">Table of Contents</h1>
  <div style="margin-left: 1em;" class="toc-section">
    <a href="#toc0">Overview</a>
    <div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/categorical-classifiers">categorical-classifiers</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/category-classifier">category-classifier</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/category-map-classifier">category-map-classifier</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/classification-workflow">classification-workflow</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/classifier">classifier</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/classify-one-to-all">classify-one-to-all</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/classify-one-to-each">classify-one-to-each</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/classify-one-to-one">classify-one-to-one</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/collect-vals">collect-vals</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/confusion-matrix">confusion-matrix</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/confusion-matrix-by-time">confusion-matrix-by-time</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/confusion-matrix-from-counts">confusion-matrix-from-counts</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/cross-validation-confusion-matrix">cross-validation-confusion-matrix</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/equivalence-classes">equivalence-classes</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/heterogenious-group-by">heterogenious-group-by</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/map-of-vectors">map-of-vectors</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/merge-equivalence-classes">merge-equivalence-classes</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/merge-levels">merge-levels</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/model-from-maps">model-from-maps</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/most-likely">most-likely</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/n-times-k-fold-cross-validation-confusion-matrix">n-times-k-fold-cross-validation-confusion-matrix</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/numerical-classifiers">numerical-classifiers</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/precision">precision</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/prob-map-tuples-by-time">prob-map-tuples-by-time</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/probs-only">probs-only</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/process-prob-map">process-prob-map</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/recall">recall</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/vectorize">vectorize</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#incanter.classification/wrapper-classifiers">wrapper-classifiers</a>
    </div>
    <br />
  </div>
</div>
</div>
                <div id="content-tag"><h1 id="overview">API for <span id="namespace-name">classification</span>
  <span id="branch-name">(1.0.x branch)</span></h1>
by <span id="author">Unknown</span><br />
<br />Usage:
<pre>
(ns your-namespace
  (:require <span id="long-name">incanter.classification</span>))
</pre><pre>
</pre><h2>Overview</h2>
<pre id="namespace-docstr">
fundamentals of classification, cross validation, and performance measures such as precision and recall.

classifiers are maps of classifier-name -&gt; functions, data are maps of feature-name features.</pre>
<br />
<h2>Public Variables and Functions</h2>
<div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/categorical-classifiers">categorical-classifiers</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (categorical-classifiers features)
</pre>
  <pre id="var-docstr">makes a categorical classifier for use with |each.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/category-classifier">category-classifier</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (category-classifier x)
</pre>
  <pre id="var-docstr"></pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/category-map-classifier">category-map-classifier</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (category-map-classifier x)
       (category-map-classifier s x)
</pre>
  <pre id="var-docstr"></pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/classification-workflow">classification-workflow</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (classification-workflow transformer classifier count-all)
</pre>
  <pre id="var-docstr">
composes a classification workflow from a classifier a counter and a transformer.

note that count-all has been abstracted due to the fact taht you may count with reduce or merge-with depending on wheter you ahve vectors or maps.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/classifier">classifier</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (classifier fns classify)
</pre>
  <pre id="var-docstr"></pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/classify-one-to-all">classify-one-to-all</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (classify-one-to-all fns data)
</pre>
  <pre id="var-docstr">
takes a map of fns and a map of features, apply each classifer fn to the entire feature map.

usage:

 (classify-one-to-each  
   {:a (present-when #(and 
				     (&gt; (:a %) 9)
				     (&lt; (:b %) 6)))}
   {:a 10 :b 5})
-&gt; {:a 1}</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/classify-one-to-each">classify-one-to-each</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (classify-one-to-each fns data)
</pre>
  <pre id="var-docstr">
takes a map of fns and a map of features, apply each classifer fn to each feature in the data map individually.

usage:

 (classify-one-to-each  
   {:a (present-when (gt 5)) :b (present-when (lt 5))}
   {:a 10 :b 5})
-&gt; {:a {:a 1 :b 0} :b {:a 0 :b 0}}</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/classify-one-to-one">classify-one-to-one</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (classify-one-to-one fns data)
</pre>
  <pre id="var-docstr">
takes a map of fns and a map of features, where there is one classifier fn per feature and they share the same key names in the classifier and feature maps.  apply each classifer fn to the corresponding feature.

usage:

 (classify-one-to-one  
   {:a (present-when (gt 5)) :b (present-when (lt 5))}
   {:a 10 :b 5})
-&gt; {:a 1 :b 0}</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/collect-vals">collect-vals</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (collect-vals maps)
</pre>
  <pre id="var-docstr"></pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/confusion-matrix">confusion-matrix</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (confusion-matrix trd tst)
</pre>
  <pre id="var-docstr">computes a confusion matrix from the counts on train and test data sets represented as maps. traverse map...as you get to the point of counts of actuals, replace the series of nested keys that lead to that point with the single key of the predicted</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/confusion-matrix-by-time">confusion-matrix-by-time</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (confusion-matrix-by-time results)
</pre>
  <pre id="var-docstr"></pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/confusion-matrix-from-counts">confusion-matrix-from-counts</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (confusion-matrix-from-counts test &amp; train)
</pre>
  <pre id="var-docstr">
produces a confusion matrix from teh joint distributions of test and train data.

right now the tests and train data are con-prob-tuples this may change if we store only the joint PMFs</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/cross-validation-confusion-matrix">cross-validation-confusion-matrix</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (cross-validation-confusion-matrix &amp; xs)
</pre>
  <pre id="var-docstr">
takes a set of n joint PMFs, and holds each joint PMF out in turn as the test set.  

merges the resulting n cross-validation matrices into a single matrix.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/equivalence-classes">equivalence-classes</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (equivalence-classes class-mappings)
</pre>
  <pre id="var-docstr">
takes a map where key is class and value is a set of equivalence classes to the key class.  it then inverts the mapping so that you can look up classes that are equivalence classes of a new larger class.

usage:
 (equivalence-classes {0 #{0 1}, 1 #{2, 3, 4}, 2 #{5 6}})
-&gt; {0 0, 1 0, 2 1, 3 1, 4 1, 5 2, 6 2}</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/heterogenious-group-by">heterogenious-group-by</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (heterogenious-group-by f coll)
</pre>
  <pre id="var-docstr">Returns a sorted map of the elements of coll keyed by the result of
f on each element. The value at each key will be a vector of the
corresponding elements, in the order they appeared in coll.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/map-of-vectors">map-of-vectors</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (map-of-vectors keys)
</pre>
  <pre id="var-docstr"></pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/merge-equivalence-classes">merge-equivalence-classes</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (merge-equivalence-classes class-mappings x)
</pre>
  <pre id="var-docstr">
 (defn merge-classes-time-before-dep [model]
  "take in [[{modelcounts} {totalcounts}] [{} {}]]"
  ;;starting with 2 becasue 1 is the first slot, which is time before departure for the metrics
  (let [model-merger {2 bucket-eq-classes
		      3 bucket-eq-classes
		      6 bucket-eq-classes}
	count-merger {2 bucket-eq-classes
		      3 bucket-eq-classes}]
  (map (fn [[modelcnts totalcnts]] [(merge-equivalence-classes model-merger modelcnts) 
				    (merge-equivalence-classes count-merger totalcnts)]) model)))</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/merge-levels">merge-levels</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (merge-levels class-mappings coll)
</pre>
  <pre id="var-docstr"></pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/model-from-maps">model-from-maps</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (model-from-maps prob-map)
</pre>
  <pre id="var-docstr">creates a model from probability report maps.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/most-likely">most-likely</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (most-likely m)
</pre>
  <pre id="var-docstr">
computes the most likely class from a map of classes to class probability.

usage:
 (most-likely {:a 0.6 :b 0.4}) -&gt; :a</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/n-times-k-fold-cross-validation-confusion-matrix">n-times-k-fold-cross-validation-confusion-matrix</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (n-times-k-fold-cross-validation-confusion-matrix list-of-lists)
</pre>
  <pre id="var-docstr"></pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/numerical-classifiers">numerical-classifiers</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (numerical-classifiers ranges)
</pre>
  <pre id="var-docstr">makes a bucketing classifier out of each range for use with |each.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/precision">precision</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (precision m)
</pre>
  <pre id="var-docstr">computes precision by class label from confusion matrix.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/prob-map-tuples-by-time">prob-map-tuples-by-time</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (prob-map-tuples-by-time prob-map-tuple)
</pre>
  <pre id="var-docstr">use to transform data for confusion matrix by time before departure</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/probs-only">probs-only</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (probs-only k a b)
       (probs-only a b)
</pre>
  <pre id="var-docstr">compute probability from computed counts.  

this is division, you have to count up the proper numerator and denominator in your counting step.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/process-prob-map">process-prob-map</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (process-prob-map [a-and-b b] report)
</pre>
  <pre id="var-docstr">process probability maps using a provided report function. 

beware: can't pass keys to reporter our you get double nested final level in map.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/recall">recall</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (recall m)
</pre>
  <pre id="var-docstr">computes recall by class label from confusion matrix.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/vectorize">vectorize</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (vectorize maps)
</pre>
  <pre id="var-docstr"></pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="incanter.classification/wrapper-classifiers">wrapper-classifiers</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (wrapper-classifiers features)
</pre>
  <pre id="var-docstr">makes a wrapping classifier like categortical but with wrapper fn.</pre>
  
</div>


</div>
              </div>
            </div>
          </div>
	</div>
	<div id="foot">
	  <div style="text-align: center;" id="copyright">No copyright info </div>
	</div>
      </div>
      <div id="DesignedBy">Logo &amp; site design by <a title="Visit Tom Hickey's website." href="http://www.tomhickey.com">Tom Hickey</a>.<br />
      Clojure auto-documentation system by Tom Faulhaber.</div>
    </div>
    <!-- /AllContentContainer -->
  </body>

</html>